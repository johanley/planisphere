<!DOCTYPE html>
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="keywords" content="planispher, astronomy, constellations, atlas, stars, learn">
 <meta name="description" content="Precise, customizable planisphere for amateur astronomers.">
 <meta name="viewport" content="width=device-width"> 
 <link rel="stylesheet" type="text/css" href="stylesheet.css?v=1" media="all"> 
 <title>Customizable Planisphere</title>
</head>

<body>

<h2>A Precise and Customizable Planisphere</h2>

 This project generates a precise, customizable planisphere as two PDF files (a <a href='starchart.pdf'>star chart</a> and a <a href='transparency.pdf'>transparency</a>).
 The two files are then printed on a high-resolution printer, and the results are attached together in the middle with a rivet.
 One file is meant for printing on card stock, and the other as a transparency.
 The transparency rotates around the central rivet.
 
 <P>The source code is <a href='https://github.com/johanley/planisphere'>here</a>.
 
 <P>The planisphere uses the <b>stereographic projection</b>, which is appropriate only for latitudes outside the tropics.
 (That is the main defect of this projection.)
 
 <P>When run as a stand-alone program, the top-level class for generating the two planisphere files is <code>planisphere.Build</code>.
 
 <P>The code can also be used in a servlet environment to 
 <a href='https://kb.itextsupport.com/home/it7kb/faq/how-can-i-serve-a-pdf-to-a-browser-without-storing-a-file-on-the-server-side'>generate PDFs as byte streams</a>
  that are served to the browser. In that case, the configuration comes from user input in a form, not a 
  <a href='https://github.com/johanley/planisphere/blob/master/src/planisphere/config/config.ini'>config.ini</a> text file.
 
<h2>Use as a Standalone Program to Make a Planisphere</h2>
Generate:
 <ul>
  <li>review the <a href='https://github.com/johanley/planisphere/blob/master/src/planisphere/config/config.ini'>config.ini</a> file, and change it to suit your needs.
  The width and height need to match the paper size to be used on the printer. Save the changes.
  <li>run the <code>planisphere.Build</code> class to generate two PDF files.
 </ul>

 <P>Print: 
 <ul>
  <li>print the PDF files on a <b>high-resolution printer</b> (you may need to use a commercial print shop for best results).
  <li>print <code>the starchart.pdf</code> file on card stock (thick paper). One page, double-sided.
  <li>print the <code>transparency.pdf</code> file on (you guessed it) a transparency. One page, single-sided.
 </ul>
  
 <P>Cut and attach: 
  <ul>
  <li>make the star chart square, by cutting the star chart along the indicated horizontal lines above and below the star chart. 
  (This is needed only if the PDF is not square to begin with.) 
  <li>make the transparency circular, by cutting along its outermost circular border
  <li><b>carefully align</b> the transparency on top of the star chart. The outermost circles, for the date-scale and the time-scale,
  should line up neatly along their full border, 360 degrees. 
  <li>attach the transparency to the star chart <a href='https://www.mcmaster.com/two-piece-rivets/'>using a rivet</a> (or something similar).
 </ul>
 
 <P>You may get best results by doing the the cutting at the last.
 Having the paper and the transparency the same size helps to center the transparency on the paper.
 
 <P>Verify the centering. Examine the intersection of the celestial equator with the horizon. 
 As you rotate the transparency 360 degrees, the intersection point of the celestial equator with the horizon should 
 always coincide with the east-west point. 

<h2>Design Goals</h2>
The main <b>design goals</b> of this planisphere are:
 <ul>
  <li>allow <b><a href='https://github.com/johanley/planisphere/blob/master/src/planisphere/config/config.ini'>customization</a></b>,  
  including for a given <b>location and year</b>.
  <li>be much more <b>precise</b> than the typical planisphere. 
  The main source of error in the planisphere produced by this project will almost always be the 
  mechanical misalignment between the star chart and the transparency, not in its design.
  <li>to predict the transit time of an object on the celestial equator <b>to within approximately 1 minute</b>. 
  <li>allow for <b>time-travel</b> into the past or future, for thousands of years. 
  This is possible since it uses a precession algorithm that's valid over long time scales, and by including 3D proper motion.
  <li>optimize for people who already know the night sky well. 
  Include only <b>minimal text and markings</b>, and only what's necessary for the correct operation of the planisphere.
 </ul>
 
 <P>For years other than that for which the planisphere was generated, the precision will of course be significantly reduced.
 
 <P>Planispheres are seldom expected to be precise.
 Nevertheless, it's always interesting to push an instrument to its limits, to see how far you can go.
 That said, many users will be perfectly content with planispheres having significantly lower precision.
 
 <h2>What's Included</h2>
 
 The planisphere's star chart includes (<a href='starchart.pdf'>example PDF</a>, with the star chart on page 2):
 <ul>
  <li>stars brighter than magnitude 5.01 (derived from the Yale Bright Star Catalog)
  <li>the position of the Sun at 18h standard time for every day (using the configured time zone and year)
  <li>the path of the Moon's orbit on July 1 of the configured year
  <li>the celestial equator
  <li>the radiant positions for the brightest meteor showers (configurable)
  <li>the constellations as simple stick drawings, without names (to reduce clutter for those who already know the night sky)
  <li>a date-scale to indicate the observer's sidereal time at 20h standard time each day of the year, in their own time zone
  <li>tables (on the back) with the time of transit of the Moon for every day of the year, and the time of transit 
  of all the bright planets for the 15th of every month. These can be used to get approximate positions for the Moon and bright planets 
  over the course of the configured year.
 </ul>
 
 <P>The planisphere's transparency goes on top of the star chart. 
 The transparency includes (<a href='transparency.pdf'>example PDF</a>):
 <ul>
  <li>a time-scale with divisions for every 2 minutes (or 1 minute, if you choose)
  <li>markings for every degree of altitude on the meridian, and every degree of azimuth on the horizon
  <li>circles for every 10 degrees of altitude and azimuth
  <li>circles for the altitudes below the horizon to indicate civil, nautical, and astronomical twilight
  <li>a special circle at 0.9 degrees below the horizon, for computing the time of sunset and sunrise
 </ul>
 
 <h2>Higher Precision</h2>
 
 An effort has been made to make the planisphere <b>as precise as possible</b>:
 <ul>
  <li>the star catalog has precession applied to the configured year. 
  The effect of precession is detectable on a small-scale star chart, even after only 20 years.
  <li>the date-scale is generated specific to a given lat/long, offset from UT, <em>and year</em>.
   The date-scale uses the local sidereal time at 20h standard time every day. This increases precision.
  <li>a correction is applied for the difference in longitude between the observer and the central meridian of their time zone.
  This allows the time-scale to be in Standard Time (UT plus/minus an offset), not Local Mean Time.
  <li>the time-scale shows mean solar time (to match your clock), not sidereal time. The sidereal day is 
  shorter than the mean solar day, by about 3m 56s. This means that the time-scale shows slightly less than 24 hours.
  <li>by default, the time scale has divisions for every 2 minutes. This renders well with an 8 inch version. For a larger 
  version, you may want to change that to every minute.
  <li>for predicting sunrise and sunset, a special altitude of -0.9 degrees has been added, just below 0.0 degrees. 
  This accounts for refraction at the horizon, the Sun's mean semi-diameter, and for the observer being 
  about 2 meters above the real horizon. (See the Explanatory Supplement to the Ephemeris, 1961, page 401).
  Sunrise and sunset correspond to the center of the Sun's disk being at that altitude.
  For the stars, the rise/set altitude is near -0.57 degrees, not -0.9. 
  For the Moon, the rise/set altitude is in the range of +0.08 to +0.18 degrees, because of its large horizontal parallax.
 </ul>
 
 <h2>Discontinuities</h2>
 
 There are two small <b>discontinuities</b> in the planisphere (by design), which bear witness to the astronomical reality:
 <ul>
  <li>the date-scale usually shows a small discontinuity between Dec 31 and Jan 1.
  This is because the date-scale is specific to a given year. 
  It shows the observer's sidereal time at 20h in their configured time zone.
  <li>the time-scale on the transparency has as discontinuity, which I decided to place near 08h. 
  This is because the solar day and the sidereal day aren't the same length.
 </ul>
 
 
 <h2>Implementation</h2>
 Notes about the implementation:
 <ul>
  <li>all text files, and all .java files, use the UTF-8 encoding; your dev environment must also treat them as UTF-8
  <li>the author has run this code only on Windows OS, not on Linux
  <li>vector graphics are used (not raster graphics)
  <li>the fonts are embedded in the PDF
  <li>different printers may render thin lines differently
  <li>the logging can be made silent simply by changing one setting in the 
  <a href='https://github.com/johanley/planisphere/blob/master/src/planisphere/util/LogUtil.java'>LogUtil</a> class 
 </ul>
 
 <h2>Tools Used</h2>
 
 Items I used in building this tool:
 <ul>
  <li>stars: the star catalog is a slightly modified version of the Yale Bright Star catalog (YBS)
  <li>planets: the VSOP87D data for the planets, by <a href='https://ui.adsabs.harvard.edu/abs/1988A%26A...202..309B/abstract'>Bretagnon and Francou</a>.
  <li>Moon: the abridged form of ELP 2000-82 as published in <em>Astronomical Algorithms</em>, by Meeus 1991.
  <li>precession: algorithm and tables for P/Q, X/Y, and p/epsilon from 
    <a href='https://ui.adsabs.harvard.edu/abs/2011A%26A...534A..22V/abstract'>this paper</a> by Vondrák, Capitaine, and Wallace.
  <li><em>Astronomical Algorithms</em> by Jean Meeus, 1991
  <li><em>Explanatory Supplement to the Astronomical Ephemeris</em>, 1961  
  <li>an old version of the <a href='https://itextsupport.com/apidocs/iText5/5.5.9/'>iText java library (5.5.13)</a>
 </ul>
 
 <h2>What I Learned</h2>
 Things I learned while building this tool:
 <ul>
  <li>implementations of calculating a Julian Date from a calendar date are usually mediocre (NOVAS, SOFA). 
  Many implementations unnecessarily restrict the input range.
  Many implementations are deeply cryptic. (For this reason, I implemented my own algorithm.)
  <li>calculating 3D proper motions is not difficult (see  <a href='https://ui.adsabs.harvard.edu/abs/1989AJ.....97.1197K/abstract'>Kaplan et al 1989</a>, section IV, page 1203).
  <li>many tools, including those produced to implement IAU standards, are optimized to produce accurate results only within a few hundred years 
  of J2000, and are unsuitable for use outside that range, without careful scrutiny. 
  <li>calculating precession over millenial time scales has only really been possible since the publication of 
  <a href='https://ui.adsabs.harvard.edu/abs/2011A%26A...534A..22V/abstract'>this paper</a> by Vondrák, Capitaine, and Wallace, in 2011.
  <li>in precession, both poles move: the equator pole and the ecliptic pole. Most people neglect the motion of the latter.
  <li>some nearby bright stars have relatively rapid proper motion: Proxima Centauri, Sirius, Pollux, Arcturus, Procyon, Rigil Kentaurus.
  <li>in astronomy, a simple atan3(y, x) function, like atan2 but with the return value in the range 0..2pi, is a simple and useful addition
  <li>the JPL's <a href='https://ssd.jpl.nasa.gov/doc/de440_de441.html'>DE441</a> ephemeris is built to calculate over a long time scale, -13200..+17191.
  <li>for the position of the Moon, it would have been best to use ELP 2000-85, which is built for historical calculations. 
  An abridged version of that theory is published in <a href='https://ui.adsabs.harvard.edu/abs/1988A%26A...190..342C/abstract'>the original paper</a>, but I don't understand the paper. 
  It's also available in <a href='https://ui.adsabs.harvard.edu/abs/1991ltpf.book.....C/abstract'>book form</a>, but I can't find or view the book anywhere. 
  <li>to match YBS data with another star catalog, the HD Henry Draper identifier is the best candidate for linking records.
  <li>I was able to map YBS records to GAIA, using Hipparcos as an intermediary, and the HD identifier.
  <li>the GAIA database is poor for bright objects. Its detectors aren't designed for them. I considered using GAIA for this project, but it wasn't feasible.
  <li>the GAIA archive is a large relational database. Their tools use a flavour of SQL to do queries.
 </ul>
 
 <P>Things I'd like to have: 
 <ul>
  <li>an updated version of the YBS, with modern parallax and proper motion values.
  <li>access to ELP 2000-85 for the Moon (see above).
  <li>an expression for the inclination of the Moon's orbit, instead of a constant. 
  This may be in <em>Mathematical Astronomy Morsels</em>, by Meeus.
 </ul>
 
 
 <h2>Explorations Over Long Time-Scales</h2>
 
 
 <h3>Movement of the Poles</h3>
 The motion of the poles of both the equator and the ecliptic can be robustly demonstrated with this code, since it 
 uses a robust algorithm for long-term precession, published in 2011. (See the <a href='https://github.com/johanley/planisphere/blob/master/src/planisphere/draw/starchart/DrawPoles.java'>DrawPoles</a> class.)
 
 <P>Here are examples of the motion of the poles going back into the past 38,000 years, in steps of 200 years at a time.
 Note how both poles move. The ecliptic pole is the smaller, darker arc near the center.
 <ul>
   <li><a href='pole_precession-N.pdf'>Northern poles</a> 
   <li><a href='pole_precession-S.pdf'>Southern poles</a> 
 </ul>
 
 <P>(Note that the above charts don't include proper motion of the stars. See below for charts that include proper motion.)
 
 <P>Most images meant to demonstrate long-term precession are mediocre for two reasons: they show a closed loop, 
 and they neglect altogether the motion of the ecliptic pole.
 
 
 
 <h3>Year of Closest Approach to the Equatorial Pole</h3>
 (These are the raw results; they should be rounded to appropriate values, about 5' of arc, and about 10 years of time.)
 
<P>For the years -100,000..+100,000 in the northern sky:
<pre>
 Star  Year   Separation
-----------------------------------
α Lyr +63979 +0°04'8.452''  Vega
α Cyg -40833 +2°52'14.376'' Deneb
α UMi -74993 +0°04'10.233'' Polaris
β UMi -27241 +2°08'1.127''  Kochab
α Cep +58112 +0°07'19.003'' Alderamin
λ Cep -44125 +0°21'6.772''
α Dra - 2796 +0°5'42.758''  Thuban
τ Her - 7606 +0°31'9.014''
</pre>

<P>For the years -100,000..+100,000 in the southern sky:
<pre>
  Star  Year   Separation
-------------------------------------
α Dor -32096 +4°1'40.739''
γ Dor -31853 +0°37'12.609''
α Eri +73425 +3°46'22.983'' Achernar
γ Cha -22457 +0°14'11.378''
α Car +91315 +5°28'58.134'' Canopus
ω Car -71406 +0°3'44.054''
δ Vel + 9253 +0°8'16.185''
γ Vel +36623 +0°9'23.857''  Regor
σ Pup -14090 +0°23'6.263''
</pre>

<P>For the years -15,000..+15,000 in the northern sky:
<pre>
 Star  Year   Separation
-----------------------------------
α Lyr -12047 +3°26'32.224'' Vega      <a href='basic/basic_chart-12047-N.pdf'>chart</a>
α Cyg +10202 +7°27'26.954'' Deneb     <a href='basic/basic_chart+10202-N.pdf'>chart</a>
α UMi + 2102 +0°27'37.062'' Polaris
β UMi - 1060 +6°31'35.241'' Kochab    <a href='basic/basic_chart-1060-N.pdf'>chart</a>
α Cep + 7539 +1°55'10.629'' Alderamin <a href='basic/basic_chart+7539-N.pdf'>chart</a>
λ Cep + 7317 +4°55'32.898'' 
α Dra - 2796 +0°05'42.758'' Thuban    <a href='basic/basic_chart-2796-N.pdf'>chart</a>
τ Her - 7606 +0°31'9.014''            <a href='basic/basic_chart-7606-N.pdf'>chart</a>
</pre>

<P>For the years -15,000..+15,000 in the southern sky:
<pre>
 Star  Year   Separation
-----------------------------------
α Dor - 6973 +9°6'57.754'' 
γ Dor - 6867 +4°57'53.914'' 
α Eri - 3358 +6°59'38.094'' Achernar
γ Cha + 4125 +1°31'59.941''            <a href='basic/basic_chart+4215-S.pdf'>chart</a>
α Car +13842 +7°27'12.079'' Canopus    <a href='basic/basic_chart+13842-S.pdf'>chart</a>
ω Car + 5788 +0°46'2.105''             <a href='basic/basic_chart+5788-S.pdf'>chart</a>
δ Vel + 9253 +0°8'16.185''             <a href='basic/basic_chart+9253-S.pdf'>chart</a>
γ Vel -15000 +2°31'20.866'' Regor
σ Pup -14090 +0°23'6.263''             <a href='basic/basic_chart-14090-S.pdf'>chart</a>
</pre>
 


<h3>Times in History</h3>
<pre>
 Year   Description                   Chart
----------------------------------------------
+ 150   Ptolemy of Alexandria     <a href='basic/basic_chart+150-N.pdf'>chart</a>
-2796   Egypt (Thuban at pole)    <a href='basic/basic_chart-2796-N.pdf'>chart</a>
- 590   Thales of Miletus         <a href='basic/basic_chart-590-N.pdf'>chart</a>
-8000   Neolithic revolution      <a href='basic/basic_chart-8000-N.pdf'>north</a>, <a href='basic/basic_chart-8000-S.pdf'>south</a>  
</pre>
 
 Interesting: Orion isn't visible in mid-northern latitudes, in the year -8000.
</body>
</html>